<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Ferment a brew — ferment • ipa</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Ferment a brew — ferment" />
<meta property="og:description" content="Missing values can occur in training data and
testing data.
Unfortunately, some imputation strategies are only designed
to impute missing training data. For example, softImpute
imputes missing values based on the index of the missing
value in the training data, and this doesn't generalize
to testing data because testing data (by definition)
do not have indices in the training data.
ferment generally adheres to the principle of using only
training data to impute missing testing data, except when it
can't (i.e., when flavor = 'softImpute').
ferment automatically copies the data-processing and imputation
arguments used in previous brewing steps. Specifically, if brew
was called with bind_miss = TRUE, then the missing value indicator
matrix for data_new will be bound to data_new and used in the
imputation procedure. Additionally, imputation parameters specified
in the spice and mash steps will automatically be implemented
in the ferment step." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ipa</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/getting_started.html">Getting started with `ipa`</a>
    </li>
    <li>
      <a href="../articles/scoring_imputes.html">scoring_imputes</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Ferment a brew</h1>
    
    <div class="hidden name"><code>ferment.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Missing values can occur in training data and
testing data.</p>
<p>Unfortunately, some imputation strategies are only designed
to impute missing training data. For example, <code>softImpute</code>
imputes missing values based on the index of the missing
value in the training data, and this doesn't generalize
to testing data because testing data (by definition)
do not have indices in the training data.</p>
<p><code>ferment</code> generally adheres to the principle of using only
training data to impute missing testing data, except when it
can't (i.e., when <code>flavor = 'softImpute'</code>).</p>
<p><code>ferment</code> automatically copies the data-processing and imputation
arguments used in previous brewing steps. Specifically, if <code>brew</code>
was called with <code>bind_miss = TRUE</code>, then the missing value indicator
matrix for <code>data_new</code> will be bound to <code>data_new</code> and used in the
imputation procedure. Additionally, imputation parameters specified
in the <code>spice</code> and <code>mash</code> steps will automatically be implemented
in the <code>ferment</code> step.</p>
    </div>

    <pre class="usage"><span class='fu'>ferment</span>(<span class='no'>brew</span>, <span class='kw'>data_new</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>timer</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>brew</th>
      <td><p>an <code>ipa_brew</code> object.</p></td>
    </tr>
    <tr>
      <th>data_new</th>
      <td><p>a data frame with missing values.</p></td>
    </tr>
    <tr>
      <th>timer</th>
      <td><p>a logical value. If <code>TRUE</code>, then the amount of time it takes
to fit the imputation models will be tracked and saved as an attribute
of the resulting <code>ipa_brew</code> object.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>What is a <code>wort</code>? A component of a <code>brew</code> object that
contains imputed datasets, models used to impute those datasets,
and the corresponding hyper-parameters of those models.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>x1</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>100</span>)
<span class='no'>x2</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>100</span>) + <span class='no'>x1</span>
<span class='no'>x3</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>100</span>) + <span class='no'>x1</span> + <span class='no'>x2</span>

<span class='no'>outcome</span> <span class='kw'>=</span> <span class='fl'>0.5</span> * (<span class='no'>x1</span> - <span class='no'>x2</span> + <span class='no'>x3</span>)

<span class='no'>n_miss</span> <span class='kw'>=</span> <span class='fl'>10</span>
<span class='no'>x1</span>[<span class='fl'>1</span>:<span class='no'>n_miss</span>] <span class='kw'>&lt;-</span> <span class='fl'>NA</span>

<span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x1</span><span class='kw'>=</span><span class='no'>x1</span>, <span class='kw'>x2</span><span class='kw'>=</span><span class='no'>x2</span>, <span class='kw'>x3</span><span class='kw'>=</span><span class='no'>x3</span>, <span class='kw'>outcome</span><span class='kw'>=</span><span class='no'>outcome</span>)

<span class='no'>sft_brew</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='brew.html'>brew_soft</a></span>(<span class='no'>data</span>, <span class='kw'>outcome</span><span class='kw'>=</span><span class='no'>outcome</span>, <span class='kw'>bind_miss</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>sft_brew</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mash.html'>mash</a></span>(<span class='no'>sft_brew</span>, <span class='kw'>with</span> <span class='kw'>=</span> <span class='fu'><a href='masher_soft.html'>masher_soft</a></span>(<span class='kw'>bs</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))
<span class='no'>sft_brew</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stir.html'>stir</a></span>(<span class='no'>sft_brew</span>, <span class='kw'>timer</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>ferment</span>(<span class='no'>sft_brew</span>)</div><div class='output co'>#&gt; A brew to handle missing data using soft imputation. 
#&gt;     impute   lambda rank_max rank_fit    fit iv_training
#&gt;      &lt;int&gt;    &lt;num&gt;    &lt;int&gt;    &lt;int&gt; &lt;list&gt;      &lt;list&gt;
#&gt;  1:      1 1.200000        2        2 &lt;list&gt;      &lt;list&gt;
#&gt;  2:      2 1.177778        2        2 &lt;list&gt;      &lt;list&gt;
#&gt;  3:      3 1.155556        2        2 &lt;list&gt;      &lt;list&gt;
#&gt;  4:      4 1.133333        2        2 &lt;list&gt;      &lt;list&gt;
#&gt;  5:      5 1.111111        2        2 &lt;list&gt;      &lt;list&gt;
#&gt;  6:      6 1.088889        2        2 &lt;list&gt;      &lt;list&gt;
#&gt;  7:      7 1.066667        2        2 &lt;list&gt;      &lt;list&gt;
#&gt;  8:      8 1.044444        2        2 &lt;list&gt;      &lt;list&gt;
#&gt;  9:      9 1.022222        2        2 &lt;list&gt;      &lt;list&gt;
#&gt; 10:     10 1.000000        2        2 &lt;list&gt;      &lt;list&gt;</div><div class='input'>
<span class='no'>data_new</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
  <span class='kw'>x1</span>      <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>/<span class='fl'>2</span>, <span class='fl'>NA_real_</span>),
  <span class='kw'>x2</span>      <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA_real_</span>, <span class='fl'>2</span>/<span class='fl'>3</span>),
  <span class='kw'>x3</span>      <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>5</span>/<span class='fl'>2</span>, <span class='fl'>2</span>/<span class='fl'>3</span>),
  <span class='kw'>outcome</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>/<span class='fl'>3</span>, <span class='fl'>2</span>/<span class='fl'>3</span>)
)

<span class='co'># soft models are re-fitted after stacking data_new with data_ref</span>

<span class='fu'>ferment</span>(<span class='no'>sft_brew</span>, <span class='kw'>data_new</span> <span class='kw'>=</span> <span class='no'>data_new</span>)</div><div class='output co'>#&gt; A brew to handle missing data using soft imputation. 
#&gt;     impute   lambda rank_max rank_fit    fit iv_training iv_testing
#&gt;      &lt;int&gt;    &lt;num&gt;    &lt;int&gt;    &lt;int&gt; &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  1:      1 1.200000        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  2:      2 1.177778        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  3:      3 1.155556        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  4:      4 1.133333        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  5:      5 1.111111        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  6:      6 1.088889        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  7:      7 1.066667        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  8:      8 1.044444        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt;  9:      9 1.022222        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;
#&gt; 10:     10 1.000000        2        2 &lt;list&gt;      &lt;list&gt;     &lt;list&gt;</div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Byron Jaeger.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


